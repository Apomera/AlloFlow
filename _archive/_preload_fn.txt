LINE 3174: wsPreloadedWords = [],
LINE 3276: // - Loading state: isPreloading, preloadProgress, firstWordReady
LINE 3280: const preloadedWords = wsPreloadedWords || [];
LINE 3285: const [preloadProgress, setPreloadProgress] = React.useState(0); // 0-100 progress
LINE 3286: const [isPreloading, setIsPreloading] = React.useState(false); // True during initial preload
LINE 5414: if (isPreloading) return;
LINE 5846: }, [isPreloading, preloadedWords.length, wordPool, callGemini, handleAudio, wordSoundsLanguage]);
LINE 5855: if (wordPool && wordPool.length > 0 && preloadedWords.length === 0 && !isPreloading) {
LINE 5859: }, [wordPool, preloadedWords.length, isPreloading, preloadInitialBatch]);
LINE 32344: const [wsPreloadedWords, setWsPreloadedWords] = useState([]);
LINE 35180: // Persist wsPreloadedWords to currently active glossary/word-sounds history item
LINE 35182: if (!generatedContent || wsPreloadedWords.length === 0) return;
LINE 35190: // Only update if wsPreloadedWords has changed
LINE 35191: if (JSON.stringify(prev[idx].wsPreloadedWords) === JSON.stringify(wsPreloadedWords)) return prev;
LINE 35194: updated[idx] = { ...updated[idx], wsPreloadedWords };
LINE 35195: // SILENCED: console.log("ðŸ’¾ Persisted preloaded words to history item:", wsPreloadedWords.length, "words");
LINE 35198: }, [wsPreloadedWords, generatedContent]);
LINE 35204: if (wsPreloadedWords.length > 0 && prevWsPreloadedWordsLengthRef.current === 0) {
LINE 35205: console.log("ðŸš€ Auto-opening Word Sounds mode for", wsPreloadedWords.length, "preloaded words");
LINE 35209: prevWsPreloadedWordsLengthRef.current = wsPreloadedWords.length;
LINE 35210: }, [wsPreloadedWords.length]);
LINE 45611: if (item.wsPreloadedWords && Array.isArray(item.wsPreloadedWords) && item.wsPreloadedWords.length > 0) {
LINE 45612: console.log("ðŸ“¥ Restoring preloaded words from saved wsPreloadedWords:", item.wsPreloadedWords.length);
LINE 45614: const wordsWithFreshTtsFlags = item.wsPreloadedWords.map(w => ({
LINE 65261: {isWordSoundsMode && (generatedContent?.type === 'glossary' || generatedContent?.type === 'word-sounds' || (wsPreloadedWords && wsPreloadedWords.length > 0)) && (
LINE 65269: wsPreloadedWords={wsPreloadedWords}
LINE 71901: preloadedWords={wsPreloadedWords || []}